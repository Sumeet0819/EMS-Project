# Sample Data Import Guide

## üìä Overview
This directory contains sample data for the EMS (Employee Management System) that can be imported into MongoDB.

---

## üìÅ Files

### 1. **employees.json**
Contains 10 sample employees:
- 1 Admin user
- 9 Regular employees

**Fields:**
- `email`: Unique email address
- `fullName`: First and last name
- `password`: Hashed password (will be set during import)
- `role`: "admin" or "employee"

### 2. **tasks.json**
Contains 15 sample tasks with various:
- Statuses: pending, in-progress, completed
- Priorities: low, medium, high
- Types: Daily and regular tasks

**Fields:**
- `title`: Task title
- `description`: Detailed description
- `status`: Current status
- `priority`: Task priority
- `deadline`: Due date
- `assignedTo`: Employee ObjectId (placeholder)
- `createdBy`: Admin ObjectId (placeholder)
- `isDaily`: Boolean for daily tasks
- `remark`: Optional remarks

### 3. **import.js**
Automated import script that:
- ‚úÖ Connects to MongoDB
- ‚úÖ Clears existing data (optional)
- ‚úÖ Hashes passwords using bcrypt
- ‚úÖ Creates proper relationships between users and tasks
- ‚úÖ Imports all data

---

## üöÄ How to Import

### **Method 1: Using the Import Script (Recommended)**

1. **Navigate to the backend directory:**
   ```bash
   cd d:\MANJ\Backend
   ```

2. **Run the import script:**
   ```bash
   node sample-data/import.js
   ```

3. **Default credentials:**
   - Email: `admin@ems.com`
   - Password: `password123`

### **Method 2: Using MongoDB Compass**

1. Open MongoDB Compass
2. Connect to your database
3. Select the `users` collection
4. Click "Add Data" ‚Üí "Import File"
5. Select `employees.json`
6. Import format: JSON
7. Repeat for `tasks` collection with `tasks.json`

**‚ö†Ô∏è Note:** You'll need to manually update the ObjectId references in tasks.json

### **Method 3: Using mongoimport CLI**

```bash
# Import employees
mongoimport --db ems-database --collection users --file sample-data/employees.json --jsonArray

# Import tasks (after updating ObjectIds)
mongoimport --db ems-database --collection tasks --file sample-data/tasks.json --jsonArray
```

---

## üìã Sample Data Overview

### **Employees (10 total)**

| Email | Name | Role |
|-------|------|------|
| admin@ems.com | Admin User | admin |
| john.doe@ems.com | John Doe | employee |
| jane.smith@ems.com | Jane Smith | employee |
| michael.johnson@ems.com | Michael Johnson | employee |
| sarah.williams@ems.com | Sarah Williams | employee |
| david.brown@ems.com | David Brown | employee |
| emily.davis@ems.com | Emily Davis | employee |
| robert.miller@ems.com | Robert Miller | employee |
| lisa.wilson@ems.com | Lisa Wilson | employee |
| james.moore@ems.com | James Moore | employee |

### **Tasks (15 total)**

**By Status:**
- Pending: 7 tasks
- In Progress: 5 tasks
- Completed: 3 tasks

**By Priority:**
- High: 5 tasks
- Medium: 8 tasks
- Low: 2 tasks

**By Type:**
- Regular Tasks: 13
- Daily Tasks: 2

---

## üîê Security Notes

1. **Passwords:** All passwords are hashed using bcrypt with 10 salt rounds
2. **Default Password:** `password123` (change after first login)
3. **Admin Account:** Use `admin@ems.com` for initial setup

---

## üõ†Ô∏è Customization

### **Adding More Employees:**

```json
{
  "email": "new.employee@ems.com",
  "fullName": {
    "firstName": "New",
    "lastName": "Employee"
  },
  "password": "$2b$10$YourHashedPasswordHere",
  "role": "employee"
}
```

### **Adding More Tasks:**

```json
{
  "title": "New Task",
  "description": "Task description",
  "status": "pending",
  "priority": "medium",
  "deadline": "2026-02-20T23:59:59.000Z",
  "assignedTo": "EMPLOYEE_ID",
  "createdBy": "ADMIN_ID",
  "isDaily": false,
  "remark": ""
}
```

---

## ‚úÖ Verification

After importing, verify the data:

```javascript
// In MongoDB shell or Compass
db.users.countDocuments() // Should return 10
db.tasks.countDocuments() // Should return 15

// Check admin user
db.users.findOne({ role: "admin" })

// Check task distribution
db.tasks.aggregate([
  { $group: { _id: "$status", count: { $sum: 1 } } }
])
```

---

## üîÑ Re-importing Data

To clear and re-import:

1. The import script automatically clears existing data
2. Or manually clear collections:
   ```javascript
   db.users.deleteMany({})
   db.tasks.deleteMany({})
   ```
3. Run the import script again

---

## üìù Notes

- All timestamps (createdAt, updatedAt) are automatically generated by MongoDB
- Task deadlines are set for future dates
- Some tasks have startTime and completedTime for realistic data
- Employee IDs are automatically assigned during import
- Tasks are distributed evenly among employees

---

## üÜò Troubleshooting

**Issue:** "Cannot find module 'bcrypt'"
- **Solution:** Run `npm install bcrypt`

**Issue:** "Connection refused"
- **Solution:** Ensure MongoDB is running

**Issue:** "Duplicate key error"
- **Solution:** Clear existing data or use different emails

**Issue:** "Invalid ObjectId"
- **Solution:** Use the import script which handles ObjectIds automatically

---

## üìû Support

For issues or questions:
1. Check MongoDB connection string
2. Verify MongoDB is running
3. Ensure all dependencies are installed
4. Check console logs for detailed error messages

---

**Last Updated:** February 12, 2026
**Data Version:** 1.0
**Compatible with:** EMS v2.0
